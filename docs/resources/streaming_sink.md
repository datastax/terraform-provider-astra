---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "astra_streaming_sink Resource - terraform-provider-astra"
subcategory: ""
description: |-
  Creates a streaming sink which sends data from a topic to a target system.
---

# astra_streaming_sink (Resource)

Creates a streaming sink which sends data from a topic to a target system.

## Example Usage

```terraform
# Generate a random pet name to avoid naming conflicts
resource "random_pet" "server" {}

# Create a new tenant
resource "astra_streaming_tenant" "streaming_tenant" {
  tenant_name         = "my-tenant-${random_pet.server.id}"
  user_email          = "someuser@example.com"
  cloud_provider      = "gcp"
  deletion_protection = false
  region              = "us-central1"
}

# Create a new namespace
resource "astra_streaming_namespace" "streaming_namespace" {
  cluster   = astra_streaming_tenant.streaming_tenant.cluster_name
  tenant    = astra_streaming_tenant.streaming_tenant.tenant_name
  namespace = "my-namespace"
}

# Create a new topic
resource "astra_streaming_topic" "streaming_topic" {
  cluster             = astra_streaming_tenant.streaming_tenant.cluster_name
  tenant              = astra_streaming_tenant.streaming_tenant.tenant_name
  namespace           = astra_streaming_namespace.streaming_namespace.namespace
  topic               = "my-topic"
  deletion_protection = false
}

# Create a new sink
# Refer to Astra Streaming documentation for more information on sinks
#   https://docs.datastax.com/en/streaming/streaming-learning/pulsar-io/connectors/index.html
resource "astra_streaming_sink" "streaming_sink" {
  # Required
  tenant_name           = astra_streaming_tenant.streaming_tenant.tenant_name
  region                = "us-central1"
  cloud_provider        = astra_streaming_tenant.streaming_tenant.cloud_provider
  namespace             = astra_streaming_namespace.streaming_namespace.namespace
  topic                 = astra_streaming_topic.streaming_topic.topic_fqn
  auto_ack              = true
  parallelism           = 1
  retain_ordering       = false
  processing_guarantees = "ATLEAST_ONCE"
  sink_name             = "jdbc-clickhouse"
  sink_configs = jsonencode({
    "userName" : "clickhouse",
    "password" : "password",
    "jdbcUrl" : "jdbc:clickhouse://fake.clickhouse.url:8123/pulsar_clickhouse_jdbc_sink",
    "tableName" : "pulsar_clickhouse_jdbc_sink"
  })

  # Optional
  deletion_protection = false
}

# --Formatted Outputs--
# astra_streaming_topic.streaming_sink.id
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `auto_ack` (Boolean) auto ack
- `namespace` (String) Pulsar Namespace
- `parallelism` (Number) Parallelism for Pulsar sink
- `processing_guarantees` (String) "ATLEAST_ONCE" "ATMOST_ONCE" "EFFECTIVELY_ONCE".
- `retain_ordering` (Boolean) Retain ordering.
- `sink_configs` (String) Sink Configs
- `sink_name` (String) Name of the sink. Note that the combination of tenant, namespace, and sink name must not exceed 47 characters.
- `tenant_name` (String) Streaming tenant name.
- `topic` (String) Streaming tenant topic.

### Optional

- `archive` (String) Name of the sink archive type to use. Defaults to the value of sink_name. Must be formatted as a URL, e.g. 'builtin://jdbc-clickhouse'
- `cloud_provider` (String, Deprecated) Cloud provider (deprecated, use `cluster` instead)
- `cluster` (String) Name of the pulsar cluster in which to create the sink. If left blank, the name will be inferred from the cloud provider and region.
- `deletion_protection` (Boolean) Whether or not to allow Terraform to destroy this streaming sink. Unless this field is set to false in Terraform state, a `terraform destroy` or `terraform apply` command that deletes the instance will fail. Defaults to `true`.
- `pulsar_cluster` (String, Deprecated) Name of the pulsar cluster in which to create the sink. If left blank, the name will be inferred from the cloud provider and region.
- `region` (String, Deprecated) cloud region (deprecated, use `cluster` instead)

### Read-Only

- `id` (String) Unique ID in the form cluster_name/tenant_name/namespace/sink_name

## Import

Import is supported using the following syntax:

```shell
terraform import astra_streaming_sink.example tenant_name/topic
```
